INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})

SET(PYRANHA_INSTALL_PATH ${PYTHON_MODULES_PATH}/pyranha)

MACRO(PYTHON_CPPMODULE arg1)
	SET_TARGET_PROPERTIES(${arg1} PROPERTIES PREFIX "")
	IF(PYDEXTENSION)
		SET_TARGET_PROPERTIES(${arg1} PROPERTIES SUFFIX ".pyd")
	ENDIF(PYDEXTENSION)
	# All modules inside here will need to link to piranha, as a general policy,
	# and of course Boost.Python and the Python libs.
	TARGET_LINK_LIBRARIES(${arg1} ${MANDATORY_LIBRARIES} ${Boost_PYTHON_LIBRARY} ${PYTHON_LIBRARIES} piranha ${ARGN})
	STRING(REGEX REPLACE "^_" "" DIR_ARG ${arg1})
	INSTALL(TARGETS ${arg1}
		RUNTIME DESTINATION ${PYRANHA_INSTALL_PATH}/${DIR_ARG}
		LIBRARY DESTINATION ${PYRANHA_INSTALL_PATH}/${DIR_ARG}
	)
ENDMACRO(PYTHON_CPPMODULE)

# Add the submodules.
ADD_SUBDIRECTORY(core)

# Add the global init file.
INSTALL(FILES __init__.py DESTINATION ${PYRANHA_INSTALL_PATH})
